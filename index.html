<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Explorer</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      margin: 0;
      padding: 0;
      transition: background 0.3s, color 0.3s;
    }
    .container { max-width: 1200px; margin: auto; padding: 20px; }
    .header { text-align: center; color: white; }
    .dark-btn {
      margin-top: 10px;
      padding: 10px 15px;
      border-radius: 10px;
      border: none;
      background: #ff6b6b;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.3s ease;
    }
    .dark-btn:hover { transform: translateY(-2px) scale(1.03); background: #ff8787; }
    .dark-btn:active { transform: translateY(0) scale(0.98); }
    

    .search-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      align-items: center;
      max-width: 600px;
      margin: 20px auto;
    }
    .search-input, select {
      flex: 1 1 200px;
      padding: 10px;
      border-radius: 10px;
      border: none;
      min-width: 180px;
    }
    .search-input {transition: all 0.3s ease;}

    .search-input:focus {
     box-shadow: 0 0 8px rgba(255, 107, 107, 0.7);
      transform: scale(1.03);
     outline: none;
    } 
    .search-btn, .voice-btn {
      padding: 10px 15px;
      border-radius: 10px;
      border: none;
      background: #ff6b6b;
      color: white;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.3s ease;
    }
  .search-btn:hover, .voice-btn:hover {
   transform: translateY(-3px) scale(1.05);
   background: #ff8787;
}
  .search-btn:active, .voice-btn:active {
   transform: translateY(0) scale(0.98);
  }

    select {
      display: block;
      margin: 10px auto 20px;
      width: 200px;
      padding: 10px;
      border-radius: 10px;
      border: none;
    }
    .books-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }


    .book-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      position: relative;
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      gap: 10px;
      cursor: pointer; padding-right: 40px;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    /* Hover effect on card 
     - .book-card: lifts and adds subtle shadow on hover
   - .book-cover: scales up with glow effect on hover*/
    .book-card:hover {
      transform: translateY(-8px) scale(1.08);
      box-shadow:  0 0 15px rgba(0, 255, 200, 0.9),
         0 0 40px rgba(0, 255, 200, 0.6),
         0 0 60px rgba(0, 255, 200, 0.4);
      transition: all 0.5s ease;
      }
   
    .book-cover { width: 100px;
       height: 140px; 
       border-radius: 5px;
       object-fit: cover;
       flex-shrink: 0;
       transition: transform 0.7s ease;
         }
     .book-cover:hover {transform: scale(1.07);}
    .book-info { flex: 1; overflow: hidden; padding-right: 10px;}
    .book-info h3 { margin: 0 0 5px; font-size: 1.1rem; }
    .book-info p { margin: 5px 0; font-size: 0.9rem; }
    .favorite { position: absolute; top: 10px; z-index: 2; right: 10px; background: none; border: none; font-size: 18px; color: red; cursor: pointer; }
    .dark-mode { background: #121212; color: #eee; }
    .dark-mode .book-card { background: #1e1e1e; color: #eee; }
    .stars { color: gold; font-size: 1rem; }
    .dark-mode .search-input, .dark-mode select, .dark-mode .search-btn, .dark-mode .voice-btn { background: #333; color: #eee; }
    /* .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 10px;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 600px;
      position: relative;
      max-height: 80vh;
      overflow-y: auto;
    } */
     /* --------------------
   Slide-up modal + backdrop blur
   Works without JS changes (detects inline `style="display:flex"`)
   -------------------- */

/* base hidden state */
#bookModal {
  display: none;               
  position: fixed;
  inset: 0;
  justify-content: center;
  align-items: flex-end;       
  z-index: 1000;
  padding: 20px;
  pointer-events: none;       }

/* backdrop pseudo-element (no blur when hidden) */
#bookModal::before { 
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0);
  backdrop-filter: blur(0px);
  transition: background 300ms ease, backdrop-filter 300ms ease;
  z-index: 1000;
}

/* modal content initial (hidden / down) */
#bookModal .modal-content {
  position: relative;
  width: 100%;
  max-width: 720px;
  max-height: 85vh;
  background: white;
  color:#333;
  border-radius: 12px 12px 8px 8px;
  padding: 20px;
  overflow-y: auto;
  transform: translateY(30px);
  opacity: 0;
  transition: transform 360ms cubic-bezier(.2,.9,.3,1), opacity 300ms ease;
  z-index: 1001;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  pointer-events: auto;
}
#bookModal .modal-content p,
#bookModal .modal-content h2,
#bookModal .modal-content small {
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}
#bookModal .modal-content button {
    background: #380268;
    color: white;
}
.dark-mode #bookModal .modal-content button {
    background: #380268;
    color: white;
}

#bookModal[style*="display:flex"],
#bookModal[style*="display: flex"] {
  display: flex !important;
  justify-content: center;
  align-items: center;
  pointer-events: auto;
}

/* backdrop visible: dim + blur */
#bookModal[style*="display:flex"]::before,
#bookModal[style*="display: flex"]::before {
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(6px);
}

/* modal content visible: slide up & fade in */
#bookModal[style*="display:flex"] .modal-content,
#bookModal[style*="display: flex"] .modal-content {
  transform: translateY(0);
  opacity: 1;
}

/* dark-mode tweak */
.dark-mode #bookModal .modal-content {
  background: #1e1e1e;
  color: #eee;
}

#bookModal[style*="display:flex"] { cursor: default; }
#bookModal[style*="display:flex"] .modal-content { cursor: auto; } 

.close-btn { position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 20px; cursor: pointer; }

    @media (max-width: 768px) {
      .book-card { flex-direction: column; align-items: center; text-align: center; }
      .book-cover { width: 120px; height: 160px; margin-bottom: 10px; }
      .book-info h3 { font-size: 1rem; }
      .search-container { flex-direction: column; }
      .search-btn, .voice-btn, .dark-btn { width: 100%; }
      #bookModal[style*="display:flex"] {align-items: center;}
      .search-input:focus {transform: scale(1.02);box-shadow: 0 0 6px rgba(255, 107, 107, 0.6);}
      .search-btn:hover, .voice-btn:hover {transform: translateY(-2px) scale(1.03);}
    }

    @media (max-width: 480px) {
      .book-card { padding: 10px; }
      .book-info p { font-size: 0.8rem; }
      .search-input { width: 100%; transform: scale(1.01);box-shadow: 0 0 4px rgba(255, 107, 107, 0.5); }
      /* to ensure that the hover effect is responsive*/
      .book-card {transition: transform 0.22s cubic-bezier(.2,.9,.3,1), box-shadow 0.22s ease;}
      .book-cover {transition: transform 0.22s cubic-bezier(.2,.9,.3,1), box-shadow 0.22s ease;}
      .book-cover:hover { transform: scale(1.05); box-shadow: 0 0 6px #fff; }
      .book-card:hover { transform: translateY(-3px); }
      .search-btn:hover, .voice-btn:hover {transform: translateY(-1px) scale(1.02);}
    }
    
    #pagination button {
      margin: 0 5px;
      padding: 5px 10px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
    }
    /* ====== Footer Styles ====== */
    .footer {
      background: #222;
      color: #f5f5f5;
      padding: 40px 20px 10px;
      margin-top: 40px;
      text-align: center;
    }
    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      align-items: flex-start;
      gap: 30px;
      max-width: 1200px;
      margin: auto;
    }
    .footer-about, .footer-contact, .footer-social {
      flex: 1 1 250px;
      min-width: 250px;
    }
    .footer h3, .footer h4 {
      color: #ff6b6b;
      margin-bottom: 10px;
    }
    .footer a {
      color: #f5f5f5;
      text-decoration: none;
      transition: color 0.3s;
    }
    .footer a:hover {
      color: #ff6b6b;
    }
    .social-icons a {
      font-size: 1.5rem;
      margin: 0 10px;
      color: #f5f5f5;
      transition: color 0.3s, transform 0.3s;
    }
    .social-icons a:hover {
      color: #ff6b6b;
      transform: scale(1.2);
    }
    .footer-bottom {
      border-top: 1px solid #444;
      margin-top: 20px;
      padding-top: 10px;
      font-size: 0.9rem;
      color: #bbb;
    }
    @media (max-width: 768px) {
      .footer-container { flex-direction: column; text-align: center; }
    }
    .dark-mode .footer { background: #121212; color: #eee; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìö Book Explorer</h1>
      <p>Discover amazing books from around the world</p>
      <button class="dark-btn" onclick="toggleDarkMode()">üåì Toggle Dark Mode</button>
      <button class="dark-btn" onclick="viewFavorites()">‚ù§Ô∏è View Favorites</button>
    </div>

    <div class="search-container">
      <input type="text" id="searchInput" class="search-input" placeholder="Search books..." />
      <button class="search-btn" onclick="searchBooks()">üîç</button>
      <button class="voice-btn" onclick="startVoiceSearch()">üé§</button>
      
    </div>

    <select id="sortOption" onchange="sortBooks()">
      <option value="">Sort By</option>
      <option value="rating">Rating</option>
      <option value="pages">Pages</option>
      <option value="date">Newest</option>
    </select>

    <div id="booksContainer" class="books-grid"></div>
    <div id="pagination" style="text-align:center; margin:20px 0;"></div>
  </div>

  <div id="bookModal" class="modal" onclick="closeModal(event)">
    <div class="modal-content" id="modalContent">
      <button class="close-btn" onclick="closeModal()">&times;</button>
    </div>
  </div>

  <script>
    const API_KEY = 'AIzaSyD8vtLoFuIzGsU72pGpt7IHNym05H621bM';
    const BASE_URL = 'https://www.googleapis.com/books/v1/volumes';
    let currentBooks = [];
    let currentPage = 1;
    const booksPerPage = 8;

    async function searchBooks() {
      const query = document.getElementById('searchInput').value.trim();
      if (!query) return;
      const res = await fetch(`${BASE_URL}?q=${encodeURIComponent(query)}&maxResults=20&key=${API_KEY}`);
      const data = await res.json();
      currentBooks = data.items || [];
      currentPage = 1; // reset to first page on new search
      displayBooks();
    }

    function displayBooks() {
      const container = document.getElementById('booksContainer');
      container.innerHTML = '';
      const start = (currentPage - 1) * booksPerPage;
      const end = start + booksPerPage;
      const visibleBooks = currentBooks.slice(start, end);

      visibleBooks.forEach((book, index) => {
        const info = book.volumeInfo;
        const card = document.createElement('div');
        card.className = 'book-card';
        card.innerHTML = `
          <img src="${info.imageLinks?.thumbnail || ''}" class="book-cover" />
          <div class="book-info">
            <h3>${info.title}</h3>
            <p><em>${info.authors?.join(', ') || 'Unknown'}</em></p>
            <p>${info.description?.substring(0, 100) || 'No description'}...</p>
            <small>Rating: ${info.averageRating || 'N/A'}</small>
          </div>
          <button class="favorite" onclick="event.stopPropagation(); toggleFavorite('${book.id}')">
            ${isFavorite(book.id) ? '‚ù§Ô∏è' : 'ü§ç'}
          </button>
        `;
        card.onclick = () => openModal(start + index);
        container.appendChild(card);
      });

      renderPagination();
    }

    function renderPagination() {
      const totalPages = Math.ceil(currentBooks.length / booksPerPage);
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';
      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        btn.style.background = i === currentPage ? '#ff6b6b' : '#ddd';
        btn.onclick = () => {
          currentPage = i;
          displayBooks();
        };
        pagination.appendChild(btn);
      }
    }

    function sortBooks() {
      const opt = document.getElementById('sortOption').value;
      if (opt === 'rating') currentBooks.sort((a, b) => (b.volumeInfo.averageRating || 0) - (a.volumeInfo.averageRating || 0));
      if (opt === 'pages') currentBooks.sort((a, b) => (b.volumeInfo.pageCount || 0) - (a.volumeInfo.pageCount || 0));
      if (opt === 'date') currentBooks.sort((a, b) => new Date(b.volumeInfo.publishedDate || 0) - new Date(a.volumeInfo.publishedDate || 0));
      displayBooks();
    }

    function toggleFavorite(id) {
      let favs = JSON.parse(localStorage.getItem('favorites')) || [];
      if (favs.includes(id)) favs = favs.filter(f => f !== id);
      else favs.push(id);
      localStorage.setItem('favorites', JSON.stringify(favs));
      displayBooks();
    }

    function isFavorite(id) {
      let favs = JSON.parse(localStorage.getItem('favorites')) || [];
      return favs.includes(id);
    }

    function openModal(index) {
      const info = currentBooks[index].volumeInfo;
      document.getElementById('modalContent').innerHTML = `
        <button class="close-btn" onclick="closeModal()">&times;</button>
        <h2>${info.title}</h2>
        <p><em>${info.authors?.join(', ')}</em></p>
        <p>${info.description}</p>
        <button onclick="downloadBookInfo('${info.title}', '${info.description?.substring(0, 100)}')">üì• Download Info</button>
        <button onclick="readDescription()">üîà Read Description</button>
      `;
      document.getElementById('bookModal').style.display = 'flex';
    }

    function closeModal(e) {
      const modal = document.getElementById('bookModal');
      if (!e || e.target === modal) modal.style.display = 'none';
    }

    function toggleDarkMode() { document.body.classList.toggle('dark-mode'); }

    function startVoiceSearch() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'en-US';
      recognition.start();
      recognition.onresult = function(e) {
        document.getElementById('searchInput').value = e.results[0][0].transcript;
        searchBooks();
      };
    }

    function readDescription() {
      const text = document.querySelector('#modalContent p')?.innerText;
      if (text) window.speechSynthesis.speak(new SpeechSynthesisUtterance(text));
    }

    function downloadBookInfo(title, desc) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text(title, 10, 10);
      doc.text(desc, 10, 20);
      doc.save(`${title}.pdf`);
    }
      function viewFavorites() {
      const favs = JSON.parse(localStorage.getItem('favorites')) || [];
      const favoriteBooks = currentBooks.filter(book => favs.includes(book.id));
      if (favoriteBooks.length === 0) {
        alert("No favorite books found!");
        return;
      }

      const container = document.getElementById('booksContainer');
      container.innerHTML = '';
      favoriteBooks.forEach((book, index) => {
        const info = book.volumeInfo;
        const card = document.createElement('div');
        card.className = 'book-card';
        card.innerHTML = `
          <img src="${info.imageLinks?.thumbnail || ''}" class="book-cover" />
          <div class="book-info">
            <h3>${info.title}</h3>
            <p><em>${info.authors?.join(', ') || 'Unknown'}</em></p>
            <p>${info.description?.substring(0, 100) || 'No description'}...</p>
            <small>Rating: ${info.averageRating || 'N/A'}</small>
          </div>
          <button class="favorite" onclick="event.stopPropagation(); toggleFavorite('${book.id}')">
            ‚ù§Ô∏è
          </button>
        `;
        card.onclick = () => openModal(currentBooks.indexOf(book));
        container.appendChild(card);
      });

      // Hide pagination when viewing favorites
      document.getElementById('pagination').innerHTML = '';
    }


    window.onload = () => {
      document.getElementById('searchInput').value = 'bestsellers';
      searchBooks();
    };
  </script>

  <!-- ====== Footer Section ====== -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-about">
        <h3>üìö Book Explorer</h3>
        <p>Discover, explore, and save your favorite books from around the world.</p>
      </div>


      <div class="footer-social">
        <h4>üåê Follow Us</h4>
        <div class="social-icons">
          <a href="https://www.linkedin.com/in/ashish-chauhan-b986a6252/" target="_blank"><i class="fab fa-linkedin"></i></a>
          <a href="https://github.com/Ash914027/books_detail" target="_blank"><i class="fab fa-github"></i></a>
          <a href="https://twitter.com" target="_blank"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>¬© 2025 Book Explorer</p>
    </div>
  </footer>


</body>
</html> 